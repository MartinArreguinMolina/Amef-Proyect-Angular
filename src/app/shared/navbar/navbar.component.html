<header class="sticky top-0 z-50 bg-[#153e75] text-white shadow">
  <div class="navbar container mx-auto px-4 lg:px-8">
    <div class="navbar-start">
      <div class="dropdown">
        <label tabindex="0" aria-label="Abrir menú"
          class="btn btn-ghost btn-square lg:hidden hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/30">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="white"
            stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </label>
        <ul tabindex="0"
          class="menu menu-sm dropdown-content mt-3 z-[1] p-3 shadow rounded-box w-80 bg-[#153e75] text-white">
          <li class="px-2 py-1">
            <div class="font-semibold truncate">{{ authservice.user()?.fullName | titlecase }}</div>
            <div class="text-xs opacity-80">Sesión activa</div>
          </li>

          <li class="menu-title mt-2 text-white/80">Roles</li>
          <li class="px-2 py-1">
            <div class="flex flex-wrap gap-1.5">
              @for (rol of authservice.user()?.roles; track $index) {
              <span class="border-white text-white">{{ rol }}</span>
              } @empty {
              <span class="badge border-white/40 bg-white/10 text-white">Sin roles</span>
              }
            </div>
          </li>

          <li class="menu-title mt-2 text-white/80">Departamentos</li>
          <li class="px-2 py-1">
            <div class="flex flex-wrap gap-1.5">
              @for (dep of authservice.user()?.departaments; track $index) {
              <span class="border-white text-white">{{ dep }}</span>
              } @empty {
              <span class=" border-white/40 bg-white/10 text-white">Sin departamentos</span>
              }
            </div>
          </li>

          <li class="mt-3"><a routerLink="/dashboard"
              class="btn btn-sm bg-white text-[#153e75] hover:bg-slate-100 w-full">Mis AMEFs</a></li>
          <li><button (click)="authservice.logout()"
              class="btn btn-sm btn-outline border-white text-white hover:bg-white/10 w-full">Cerrar sesión</button>
          </li>
        </ul>
      </div>
      <div class="ml-2 font-semibold truncate max-w-[48vw] sm:max-w-[56vw] lg:max-w-none">
        {{ authservice.user()?.fullName | titlecase }}
      </div>
    </div>
    <div class="navbar-center hidden lg:flex">
      <div class="flex flex-wrap items-center gap-2">
        @for (rol of authservice.user()?.roles; track $index) {
        <span class="badge border border-white/30 bg-white/10 text-white">{{ rol }}</span>
        } @empty {
        <span class="badge border border-white/30 bg-white/10 text-white">Sin roles</span>
        }
        <span class="mx-1 opacity-60">•</span>
        @for (dep of authservice.user()?.departaments; track $index) {
        <span class="badge border border-white/30 bg-white/10 text-white">{{ dep }}</span>
        } @empty {
        <span class="badge border border-white/30 bg-white/10 text-white">Sin departamentos</span>
        }
      </div>
    </div>
    <div class="navbar-end gap-2">
      <a routerLink="/dashboard" class="btn btn-sm bg-white text-[#153e75] hover:bg-slate-100">
        Mis AMEFs
      </a>
      <button (click)="authservice.logout()" class="btn btn-sm btn-outline border-white text-white hover:bg-white/10">
        Cerrar sesión
      </button>
    </div>
  </div>

  <div class="h-0.5 w-full bg-gradient-to-r from-[#153e75] via-white/40 to-[#153e75]"></div>
</header>
