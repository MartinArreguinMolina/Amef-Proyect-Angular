<div class="max-h-56 overflow-y-auto min-h-screen grid lg:grid-cols-2 font-sans">

  <div
    class="relative hidden lg:flex flex-col items-center justify-center bg-gradient-to-br from-[#153e75] to-[#2361b2] text-white p-12 overflow-hidden">

    <div class="absolute inset-0">
      <div class="absolute -bottom-24 -left-24 w-72 h-72 bg-white/20 rounded-full filter blur-xl"></div>
      <div class="absolute -top-12 -right-12 w-96 h-96 bg-white/10 rounded-full filter blur-2xl"></div>
      <svg class="absolute inset-0 w-full h-full opacity-20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000">
        <path fill="none" stroke="currentColor" stroke-width="2" d="M-100 500 C 200 200, 800 800, 1100 500" />
        <path fill="none" stroke="currentColor" stroke-width="1.5" d="M-100 600 C 300 1000, 700 0, 1100 400" />
      </svg>
    </div>

    <div class="z-10 text-center max-w-md" style="text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
      <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4 animate-fade-in-down">
        Registrate al Sistema AMEF
      </h1>
      <p class="text-lg opacity-90 leading-relaxed animate-fade-in-up">
        Gestión profesional para el Análisis de Modo y Efecto de Falla. Potencia la calidad y seguridad en tus procesos.
      </p>
    </div>
  </div>

  <div class="relative flex items-center justify-center p-8 bg-white bg-cover">
    <div class="absolute inset-0 bg-slate-100/30"></div>
    <div class="w-full max-w-md z-10">

      <div class="text-center mb-8">
        <div class="inline-block p-1.5 bg-gradient-to-br from-white/80 to-white/50 rounded-full shadow-lg">
          <div
            class="w-20 h-20 rounded-full bg-gradient-to-br from-[#153e75] to-[#2361b2] flex items-center justify-center shadow-inner shadow-black/10">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white drop-shadow-lg" fill="none"
              viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
        </div>
        <h2 class="text-3xl font-bold text-gray-800 mt-4" style="text-shadow: 0 1px 2px #FFF;">Bienvenido</h2>
        <p class="text-gray-600 mt-1">Registrate para continuar</p>
      </div>

      <div
        class="hover:scale-105 duration-300 bg-white/60 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/30">
        <div class="p-8">
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="space-y-5">

              <div class="relative">
                <input placeholder="Nombre completo"
                  class="input w-full pl-4 bg-white/70 border-gray-300/80 placeholder-gray-500 text-gray-800"
                  formControlName="fullName" />
                <forms-error-label [control]="this.registerForm.get('fullName')!" />
              </div>

              <div class="relative">
                <input placeholder="correo electronico"
                  class="input w-full pl-4 bg-white/70 border-gray-300/80 placeholder-gray-500 text-gray-800"
                  formControlName="email" />
                <forms-error-label [control]="this.registerForm.get('email')!" />
              </div>

              <div class="relative">
                <input [type]="this.seePassword() ? 'text' : 'password'" placeholder="Contraseña"
                  class="input w-full pl-4 bg-white/70 border-gray-300/80 placeholder-gray-500 text-gray-800"
                  formControlName="password" />
                <forms-error-label [control]="this.registerForm.get('password')!" />
              </div>

              <div class="relative">
                <input [type]="this.seePassword() ? 'text' : 'password'" placeholder="Confirmar Contraseña"
                  class="input w-full pl-4 bg-white/70 border-gray-300/80 placeholder-gray-500 text-gray-800"
                  formControlName="confirmPassword" />
                <forms-error-label [control]="this.registerForm.get('confirmPassword')!" />
              </div>

              <fieldset class="fieldset rounded-box w-64 border p-4 shadow-xs border-gray-300/80">
                <label class="label text-black">
                  <input (change)="onCheckboxChange($event)" type="checkbox"
                    [checked]="seePassword() ? 'checked' : null" class="checkbox  checked:bg-[#153e75] checked:text-white" />
                  Ver Contraseñas
                </label>
              </fieldset>

              <div class="space-y-2">
                <div class="text-sm text-black">Selecciona un rol</div>

                <div class="relative" (keydown.escape)="roleOpen.set(false)">
                  <button type="button" class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-black shadow-sm outline-none transition
             focus:border-[#153e75] focus:ring-4 focus:ring-[#153e75]/20" (click)="roleOpen.set(!roleOpen())">
                    <span class="text-gray-600 block truncate">
                      {{ registerForm.get('rol')?.value || 'Selecciona una opción' }}
                    </span>

                    <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center">
                      <svg class="h-4 w-4 text-slate-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                          d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08z"
                          clip-rule="evenodd" />
                      </svg>
                    </span>
                  </button>

                  @if (roleOpen()) {
                  <div
                    class="absolute z-50 mt-2 w-full overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg">
                    <div class="max-h-56 overflow-auto p-1">
                      @for (rol of roles.value(); track $index) {
                      <button type="button"
                        class="w-full rounded-lg px-3 py-2 text-left text-sm text-black hover:bg-[#153e75] hover:text-white transition"
                        (click)="registerForm.patchValue({ rol: rol.rol }); roleOpen.set(false); this.idRolSelected.set(rol.id)">
                        {{ rol.rol }}
                      </button>
                      }
                    </div>
                  </div>
                  }
                </div>

                <forms-error-label [control]="registerForm.get('rol')!" />
              </div>

              <div class="space-y-2">
                <div class="text-sm text-black">Selecciona un departamento</div>

                <div class="relative" (keydown.escape)="deptOpen.set(false)">
                  <button type="button" class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-black shadow-sm outline-none transition
             focus:border-[#153e75] focus:ring-4 focus:ring-[#153e75]/20" (click)="deptOpen.set(!deptOpen())">
                    <span class="text-gray-600 block truncate">
                      {{ registerForm.get('departament')?.value || 'Selecciona una opción' }}
                    </span>

                    <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center">
                      <svg class="h-4 w-4 text-slate-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                          d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08z"
                          clip-rule="evenodd" />
                      </svg>
                    </span>
                  </button>

                  @if (deptOpen()) {
                  <div
                    class="absolute z-50 mt-2 w-full overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg">
                    <div class="max-h-56 overflow-auto p-1">
                      @for (d of departaments.value(); track $index) {
                      <button type="button"
                        class="w-full rounded-lg px-3 py-2 text-left text-sm text-black hover:bg-[#153e75] hover:text-white transition"
                        (click)="registerForm.patchValue({ departament: d.department }); deptOpen.set(false); this.idDeptSelected.set(d.id)">
                        {{ d.department }}
                      </button>
                      }
                    </div>
                  </div>
                  }
                </div>

                <forms-error-label [control]="registerForm.get('departament')!" />
              </div>



              <div class="pt-2">
                <button type="submit" class="w-full cursor-pointer text-white py-3 px-4 rounded-lg shadow-lg transition-all duration-200 ease-in-out
                                            bg-gradient-to-b from-[#153e75] to-[#2361b2]">
                  Ingresar al Sistema
                </button>
              </div>

            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>



@if(singUpSucess()){
<message-notification title="Te has registrado correctamente" subtitle="Porfavor inicia sesion" />
}


@if(singUpError()){
  <message-notification [title]="this.authService.singUpError()!" subtitle="Porfavor intenta de nuevo" />
}

